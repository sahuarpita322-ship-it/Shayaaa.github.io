<!DOCTYPE html>
<html>
<head>
  <link rel="manifest" href="manifest.json">

  <title>Sahaya â€“Emergency Services</title>

  <meta name="description" content="Sahaya provides quick access to emergency services, hospitals, blood banks, and government schemes for rural and semi-urban users.">

  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel="stylesheet" href="style.css">
</head>
<body data-page="emergency">
  <div class="app" role="main">
    <a href="index.html" class="btn-back">
      <span>â¬…</span> Back to Home
    </a>

    <header class="app-header" style="margin-bottom:10px;">
      <div class="app-title">
        ğŸš¨ Emergency Numbers
        <span>Tap a card to call immediately</span>
      </div>
      <div class="language-buttons" role="group" aria-label="Choose language">
        <button type="button" onclick="setLanguage('en')" aria-pressed="true">English</button>
        <button type="button" onclick="setLanguage('hi')" aria-pressed="false">à¤¹à¤¿à¤¨à¥à¤¦à¥€</button>
        <button type="button" onclick="setLanguage('or')" aria-pressed="false">à¬“à¬¡à¬¿à¬†</button>
      </div>
    </header>
    <button onclick="playEmergencyGuide()">
  ğŸ”Š Emergency Guide
</button>

    <button id="voiceBtn" type="button" class="btn-voice">
      ğŸ”Š Listen instructions
    </button>

    <p style="text-align:center; margin-top:10px; font-size:0.9rem; color:#546e7a;">
      Tap a number card, then press call on your phone.
    </p>

    <div class="emergency-container">

    <div class="emergency-card red">
      <h2>ğŸš‘ Ambulance</h2>
      <p>108</p>
      <button onclick="callNumber('108'); speakEmergency('ambulance')">
  ğŸš‘ Ambulance
</button>
    </div>

    <div class="emergency-card blue">
      <h2>ğŸš“ Police</h2>
      <p>100</p>
     <button onclick="callNumber('100'); speakEmergency('police')">
  ğŸš“ Police
</button>
    </div>

    <div class="emergency-card orange">
      <h2>ğŸ”¥ Fire Brigade</h2>
      <p>101</p>
      <button onclick="callNumber('100'); speakEmergency('police')">
  ğŸš“ Police
</button>
    </div>
    <div class="emergency-card purple">
      <h2>ğŸ‘© Women Helpline</h2>
      <p>181</p>
      <button onclick="callNumber('181')">Call Now</button>
    </div>

    <div class="emergency-card green">
      <h2>ğŸ‘¶ Child Helpline</h2>
      <p>1098</p>
      <button onclick="callNumber('1098')">Call Now</button>
    </div>

    <div class="emergency-card teal">
      <h2>ğŸ§  Mental Health</h2>
      <p>14416</p>
      <button onclick="callNumber('14416')">Call Now</button>
    </div>

    <div class="emergency-card brown">
      <h2>ğŸ†˜ Disaster Management</h2>
      <p>1070</p>
      <button onclick="callNumber('1070')">Call Now</button>
    </div>

    <div class="emergency-card dark">
      <h2>ğŸš¨ National Emergency</h2>
      <p>112</p>
      <button onclick="callNumber('112')">Call Now</button>
    </div>

    </div>
    <div id="dispatchTracker" class="card" hidden>
      <h3>Dispatch Tracker</h3>
      <p id="dispatchInfo">No active dispatch.</p>
      <p id="dispatchStatus"></p>
      <p id="dispatchDistance"></p>
      <p id="dispatchETA"></p>
      <div style="display:flex;gap:8px;margin-top:8px;">
        <button id="copyDispatchLink" class="btn-soft">Copy Dispatch Link</button>
        <button id="cancelDispatchBtn" class="cancel-btn">
  Cancel Dispatch
</button>
      </div>
    </div>

    <script src="script.js"></script>
    <script>
if ("serviceWorker" in navigator) {
  navigator.serviceWorker.register("sw.js")
    .then(() => console.log("Service Worker Registered"))
    .catch(err => console.log("Service Worker Failed:", err));
}
    </script>
  </div>
  
<hr>

<!-- Helper Instructions -->
<div class="helper">
  
<script src="emergency.js"></script>
<script>
let emergencySpeech = null;

function playEmergencyGuide() {
  const message = `
  Welcome to Sahaya Emergency Guide.

  This guide explains how emergency services work on this page.

  The ambulance button directly calls emergency medical services.
  If tracking is enabled, the ambulance driver updates their location
  so you can see how far it has reached and estimate arrival time.

  The police button connects you to law enforcement for safety support.

  The fire brigade button helps you reach fire services in case of fire emergencies.

  This guide does not activate any emergency automatically.
  Actions happen only when you press the service buttons.
  `;

  // ğŸ”´ STOP previous speech completely
  window.speechSynthesis.cancel();

  // ğŸŸ¢ CREATE new speech instance
  emergencySpeech = new SpeechSynthesisUtterance(message);
  emergencySpeech.lang = "en-IN";
  emergencySpeech.rate = 0.95;
  emergencySpeech.pitch = 1;

  window.speechSynthesis.speak(emergencySpeech);
}
</script>
<script>
  function speakEmergency(type) {
    let message = "";

    if (type === "ambulance") {
      message = `
      Ambulance emergency activated.
      Your request has been sent to the nearest available ambulance.

      Live tracking is enabled.
      The ambulance driver updates their location using a secure mobile device.
      This helps us track how far the ambulance has reached
      and estimate the time required to arrive.

      Please stay calm.
      Keep the patient stable.
      Medical help is on the way.
      `;
    }

    if (type === "police") {
      message = `
      Police emergency activated.
      Your request has been forwarded to the nearest police station.

      Officers are being dispatched to your location.
      Please stay in a safe place.
      Avoid confrontation and keep your phone accessible.

      Help and protection are on the way.
      `;
    }

    if (type === "fire") {
      message = `
      Fire emergency activated.
      Fire services have been alerted immediately.

      Please move to a safe area.
      Do not use elevators.
      If possible, switch off electrical connections.

      Fire brigade is on the way to assist you.
      `;
    }

    const speech = new SpeechSynthesisUtterance(message);
    speech.lang = "en-IN";
    speech.rate = 0.95;
    speech.pitch = 1;
    speech.volume = 1;

    window.speechSynthesis.cancel();
    window.speechSynthesis.speak(speech);
  }
</script>
</body>
</html>